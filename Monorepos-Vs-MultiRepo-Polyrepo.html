<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="4aJ9pFEKjOcI9zlltw5NYLKMsnk_Ygy49okv3PcTknw">
    <meta name="baidu-site-verification" content="JFD0vIDsbS">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content>
    <meta name="keyword" content>
    <link rel="shortcut icon" href="/img/cat-icon-512.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          Monorepos Vs MultiRepo/Polyrepo - Yuankun | Zilan
        
    </title>

    <link rel="canonical" href="http://liyuankun.top/Monorepos-Vs-MultiRepo-Polyrepo.html">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS --> 
    <!-- <link rel="stylesheet" href="/css/zilan.min.css"> -->
    <link rel="stylesheet" href="/css/zilan.css">
    
    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <link rel="stylesheet" href="/css/widget.css">

    <link rel="stylesheet" href="/css/rocket.css">

    <link rel="stylesheet" href="/css/signature.css">

    <link rel="stylesheet" href="/css/toc.css">

    <link rel="stylesheet" href="/css/share.css">

    <link rel="stylesheet" href="/css/gitment.css">

    <link rel="stylesheet" href="/css/copyright.css">

    <link rel="stylesheet" href="/css/search/localsearch.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!-- hexo-inject:begin --><!-- hexo-inject:end --><!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            background-image: url('');
            /*post*/
        
    }
    
        #signature{
            background-image: url('/img/signature/signature-white.png');
        }
    

    
        #header-cover {
            background-color: rgba(0,0,0,.2);
        }
    
</style>

<header class="intro-header" >
    <div id="header-cover">
        <!-- Signature -->
        <div id="signature">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    
                        <div class="post-heading">
                            <div class="tags">
                                
                            </div>
                            <!-- category post header -->
                            
                            
                                <span class="post-comments-count">
                                    <span class="post-meta-divider">|</span>
                                    <a href="/Monorepos-Vs-MultiRepo-Polyrepo.html#git_comment" rel="external nofollow" itemprop="discussionUrl">
                                        <span class="post-meta-item-icon">
                                            <i class="fa fa-comment-o"></i>
                                        </span>
                                        <span class="post-comments-count gitment-comments-count" data-xid="/Monorepos-Vs-MultiRepo-Polyrepo.html" itemprop="commentsCount"></span>
                                    </a>
                                </span>
                            
                            <h1>
                                Monorepos Vs MultiRepo/Polyrepo
                                <!-- Share -->
                                
                                    <span id="needsharebutton-postbottom" class="header-share">
                                        <span class="btn">
                                            <i class="fa fa-share-alt" aria-hidden="true"></i>
                                        </span>
                                    </span>
                                
                            </h1>
                            <h2 class="subheading"></h2>
                            <span class="meta">
                                Posted by Yuankun Li on
                                2023-04-14
                            </span>
                        </div>
                    
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">岚</a>
            <!-- Search -->
            
            
                <li class="menu-item menu-item-search">
                
                    <a href="javascript:;" class="popup-trigger">
                
                    
                        <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
                    
                </a>
                </li>
            
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/categories/">Categories</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Post Content -->
<div id="container">
    <article>
        <div class="container post-content-container">
            <div class="row">

                <!-- One Post Content Container -->
                <div class="
                    col-lg-8 col-lg-offset-2
                    col-md-10 col-md-offset-1
                    post-container">

                    <h1 id="what-is-a-monorepo">What is a Monorepo?</h1>
<p><a href="https://monorepo.tools/#what-is-a-monorepo" target="_blank" rel="noopener">What is a Monorepo?</a></p>
<h1 id="why-monorepo">Why Monorepo</h1>
<p><a href="https://monorepo.tools/#why-a-monorepo" target="_blank" rel="noopener">Why Monorepo</a></p>
<p>Monorepo是指将所有项目模块都存放在一个代码库中的做法。通常，我们会为每个项目模块建立一个独立的代码库，但是在一些特殊情况下，将所有项目模块放在一个代码库中会更加方便。通常情况下，Monorepo都会配合一些特殊的工具使用，比如Lerna、Yarn Workspaces、Bazel等。</p>
<h2 id="multirepo-vs-monorepo">MultiRepo Vs MonoRepo</h2>
<h1 id="monorepo的优缺点">Monorepo的优缺点</h1>
<h2 id="优点">优点</h2>
<ul>
<li>模块复用性更高：在Monorepo中，所有的模块都在同一个代码库中，这意味着所有的模块可以互相依赖，相互调用，模块复用性更高，避免了重复开发。</li>
<li>代码可维护性更高：Monorepo可以使得所有项目模块在一个仓库中，开发人员可以更加方便的进行代码的维护和修改，同时也可以提高开发效率。</li>
<li>更容易进行代码重构：Monorepo使得整个项目的代码都在一个仓库中，因此进行代码重构时，更加方便。</li>
</ul>
<h2 id="缺点">缺点</h2>
<ul>
<li>代码库体积变大：将所有的项目模块都放在一个代码库中，会导致代码库体积变大，同时代码库的构建时间和编译时间也会相应变长。</li>
<li>部署复杂度增加：在Monorepo中，所有的模块都在同一个代码库中，一旦有代码发生变动，所有的模块都需要重新构建和部署，因此部署复杂度增加。</li>
</ul>
<h1 id="monorepo的应用场景">Monorepo的应用场景</h1>
<ul>
<li>多个项目共用同一组件：如果不使用Monorepo，那么每个项目都需要维护一份组件库，不仅工作量大，而且还容易出现版本管理问题。使用Monorepo可以将所有的组件都放在一个代码库中，避免了重复维护和版本管理问题。</li>
<li>多个项目依赖同一份代码：如果有多个项目依赖同一份代码，那么如果不使用Monorepo，这些项目都需要去维护自己的一份代码库，使用Monorepo可以避免重复维护的问题。</li>
<li>代码拆分成多个模块：如果一个项目的代码越来越复杂，代码行数越来越多，那么可以考虑将代码拆分成多个模块，使用Monorepo可以更加方便的进行代码拆分和管理。</li>
<li>提高代码共享和复用：使用Monorepo可以将代码库中的模块复用在</li>
</ul>
<details>
  <summary>对比表格 (点击展开)</summary>
  <p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">|                     | MultiRepo | MonoRepo   |</span><br><span class="line">| ------------------- | -------------------- | --------------- |</span><br><span class="line">| Pros  |  <span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - Enables better tracking of changes and version control.- Allows for independent release cycles for different projects.- Can lead to faster build times as only the necessary code needs to be built.- Reduces the risk of a single point of failure.     |  <span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - Easier <span class="strong">**dependency management**</span> as all code is in one repository.<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - <span class="strong">**One version of everything**</span> No need to worry about incompatibilities because of projects depending on conflicting versions of third party libraries.<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - Allows for <span class="strong">**sharing**</span> <span class="strong">**of code**</span> and resources between projects.<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - Atomic commits across projects Everything works together at every commit. There's no such thing as a breaking change when you fix everything in the same commit.<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - <span class="strong">**Simplifies build and release**</span> processes.<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - Developer mobility Get a consistent way of building and testing applications written using different tools and technologies. Developers can confidently contribute to other teams’ applications and verify that their changes are safe.<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - Can lead to better <span class="strong">**code consistency**</span> and easier maintenance.- Enables better <span class="strong">**code reuse and refactoring**</span>. Allows for better <span class="strong">**collaboration**</span> between teams.<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - <span class="strong">**No overhead to create new projects**</span> Use the existing CI setup, and no need to publish versioned packages if all consumers are in the same repo.    <span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - <span class="strong">**Hard-to-see-affected applications:**</span> Once a developer made an update to a component library, it was hard to see all affected applications company-wide, which usually resulted in breaking features.    <span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - <span class="strong">**Hard mode onboarding:**</span> Newcomers struggled to find related components in these multiple codebases. |</span><br><span class="line">| Cons |  <span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - Can be more complex to <span class="strong">**manage dependencies**</span> between different repositories.<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - <span class="strong">**Costly cross-repo changes to shared libraries and consumers**</span>       Consider a critical bug or breaking change in a shared library: the developer needs to set up their environment to apply the changes across multiple repositories with disconnected revision histories. Not to speak about the coordination effort of versioning and releasing the packages.<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - Can make it harder to <span class="strong">**share code and resources**</span> between projects.<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - <span class="strong">**Cumbersome code sharing**</span> To share code across repositories, you'd likely create a repository for the shared code. Now you have to set up the tooling and CI environment, add committers to the repo, and set up package publishing so other repos can depend on it. And let's not get started on reconciling incompatible versions of third party libraries across repositories...<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - Can lead to <span class="strong">**inconsistencies**</span> in code and maintenance issues.<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - <span class="strong">**Inconsistent tooling**</span>       Each project uses its own set of commands for running tests, building, serving, linting, deploying, and so forth. Inconsistency creates mental overhead of remembering which commands to use from project to project.<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - Can create <span class="strong">**silos**</span> between different <span class="strong">**teams**</span> working on different repositories.<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - <span class="strong">**Significant code duplication**</span> - No one wants to go through the hassle of setting up a shared repo, so teams just write their own implementations of common services and components in each repo. This wastes up-front time, but also increases the burden of maintenance, security, and quality control as the components and services change. |  <span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - Can be difficult to set up and maintain.- Can lead to slower build times as the entire repository needs to be rebuilt.- Can make it harder to track changes and version control.- Can create a single point of failure.               |</span><br><span class="line">| Use Cases  |  <span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - Large-scale projects with <span class="strong">**multiple independent**</span> projects.- Projects with <span class="strong">**complex dependencies or different release**</span> cycles.- Teams with independent developers working on different codebases.                |  <span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span> - Large-scale enterprise projects with <span class="strong">**multiple interdependent**</span> projects.- Projects with <span class="strong">**shared dependencies**</span> or code.- Teams with multiple developers working on the same codebase.      |</span><br></pre></td></tr></table></figure>
  </p>
</details>
<h2 id="monnorepo-解决了什么问题">MonnoRepo 解决了什么问题</h2>
<h2 id="monnorepo-又引入了什么问题">MonnoRepo 又引入了什么问题</h2>
<h2 id="monnorepo-工具解决了哪些问题">MonnoRepo 工具解决了哪些问题</h2>
<h1 id="monorepo-features">Monorepo features</h1>
<ul>
<li><a href="https://monorepo.tools/#monorepo-features" target="_blank" rel="noopener">Monorepo features</a></li>
</ul>
<h1 id="monorepos-tool-comparison">Monorepos tool comparison</h1>
<p>Compare <a href="https://monorepo.tools/#tools-review" target="_blank" rel="noopener">Bazel (by Google),  Gradle Build Tool (by Gradle, Inc),  Lage (by Microsoft),  Lerna, Nx (by Nrwl), Pants (by the Pants Build community), Rush (by Microsoft), and Turborepo (by Vercel)</a>.</p>
<p>There are so many awesome Monorepo tools, software and architectures.</p>
<p>Some enterprise-level solutions, such as Google’s Bazel and Gradle, have little to do with the front end, and the cost of getting started is relatively high, so we will not discuss them here.</p>
<table>
<thead>
<tr>
<th>Monorepo Solution</th>
<th>Introduction</th>
<th>*<em>company</em> <br> -</th>
<th>URL</th>
<th>Pros</th>
<th>Cons</th>
<th>Pricing</th>
<th>Ease of Use</th>
<th>Scalability</th>
<th>Compatibility</th>
<th>Dependency Management</th>
<th>Task Runner</th>
<th>Version Management</th>
</tr>
</thead>
<tbody>
<tr>
<td>Yarn Workspaces</td>
<td>A package manager for JavaScript that allows you to manage multiple packages within a single monorepo.</td>
<td>Opensource</td>
<td><a href="https://yarnpkg.com/features/workspaces" target="_blank" rel="noopener"><img src="https://yarnpkg.com/favicon-32x32.png?v=775b53071ebde4f6d738805a2d9fcb72" alt>Workspaces</a></td>
<td>Easy to set up and use, with clear documentation and a simple CLI.</td>
<td>Can become slow and unwieldy with a highly complex or deeply nested dependency graph.</td>
<td>Free and open source.</td>
<td>Easy</td>
<td>Medium to Large</td>
<td>Fully compatible with React, TypeScript, and other popular JavaScript frameworks and libraries. Can be used with npm packages as well.</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td>pnpm</td>
<td><a href="https://pnpm.js.org/en/" title="https://pnpm.js.org/en/" target="_blank" rel="noopener">pnpm</a> is a JavaScript dependency management tool that supports monorepos through a set of dedicated commands called <code>pnpm multi</code>.</td>
<td>Opensource</td>
<td>[<img src="https://pnpm.io/img/favicon.png" alt>Fast, disk space efficient package manager</td>
<td>pnpm](<a href="https://pnpm.io/" target="_blank" rel="noopener">https://pnpm.io/</a>)</td>
<td>Offers fast and efficient package management, with support for multiple registries and package sources.</td>
<td>May not provide the same level of customization or tooling as some other solutions.</td>
<td>Free and open source.</td>
<td>Easy</td>
<td>Medium to Large</td>
<td>Fully compatible with React, TypeScript, and other popular JavaScript frameworks and libraries.</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Lerna</td>
<td><a href="https://lerna.js.org/" title="https://lerna.js.org/" target="_blank" rel="noopener">Lerna</a> is a tool for managing JavaScript projects with multiple packages, built on Yarn.</td>
<td>Opensource <a href="https://github.com/lerna/lerna/issues/3121" title="https://github.com/lerna/lerna/issues/3121" target="_blank" rel="noopener"><strong>recently changed stewardship to Nrwl</strong></a><strong>!</strong></td>
<td><a href="https://github.com/lerna/lerna" target="_blank" rel="noopener"><img src="https://github.com/fluidicon.png" alt>GitHub - lerna/lerna: Lerna is a fast, modern build system for managing and publishing multiple JavaScript/TypeScript packages from the same repository.</a></td>
<td>Offers a wide range of features and customization options. Supports large-scale projects with a highly complex or deeply nested dependency graph.</td>
<td>Can be complex to set up and configure, with a steeper learning curve than some other solutions.</td>
<td>Free and open source.</td>
<td>Medium</td>
<td>Large</td>
<td>Fully compatible with React, TypeScript, and other popular JavaScript frameworks and libraries. Can be used with npm packages as well.</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>Nx</td>
<td><a href="https://nx.dev/" title="https://nx.dev/" target="_blank" rel="noopener">Nx</a> is a build system for TypeScript monorepos and a set of monorepo management tools.</td>
<td>Nrwl</td>
<td><a href="https://nx.dev/" target="_blank" rel="noopener"><img src="https://nx.dev/favicon/favicon-16x16.png" alt>Nx: Smart, Fast and Extensible Build System</a></td>
<td>Offers a comprehensive set of tools and features for managing monorepos, including testing, linting, and deployment. Can be used with a wide range of languages and frameworks.</td>
<td>May require some additional configuration and setup for certain workflows.</td>
<td>Free and open source.</td>
<td>Easy to Medium</td>
<td>Large</td>
<td>Fully compatible with React, TypeScript, and other popular JavaScript frameworks and libraries. Integrates with popular development tools like VS Code, Git, and Docker.</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Turborepo</td>
<td><a href="https://turborepo.org/" title="https://turborepo.org/" target="_blank" rel="noopener">Turborepo</a> is a high-performance build system for JavaScript and TypeScript codebases.</td>
<td>Vercel</td>
<td>[<img src="https://cdn0.dan.com/assets/icons/favicon-8f8be32076803305bd39913d14e9f28567adc474d60a95af6e0d21282302ce6a.ico" alt>turborepo.dev - Domain Name For Sale</td>
<td><a href="http://Dan.com" target="_blank" rel="noopener">Dan.com</a>](<a href="https://turborepo.dev/" target="_blank" rel="noopener">https://turborepo.dev/</a>)</td>
<td>Offers fast and scalable builds, with automatic caching and parallelization. Supports multiple languages and frameworks.</td>
<td>Relatively new and may have some limitations or issues not yet discovered.</td>
<td>Free and open source.</td>
<td>Easy</td>
<td>Large</td>
<td>Fully compatible with React, TypeScript, and other popular JavaScript frameworks and libraries.</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Rush</td>
<td><a href="https://rushstack.io/" title="https://rushstack.io/" target="_blank" rel="noopener">Rush Stack</a> is a family of tools geared towards large scale TypeScript monorepos, and based around the <a href="https://rushjs.io/" title="https://rushjs.io/" target="_blank" rel="noopener">Rush</a> build orchestrator</td>
<td>Microsoft</td>
<td><a href="https://rushjs.io/" target="_blank" rel="noopener"><img src="https://rushjs.io/images/site/favicon.ico" alt>Rush</a></td>
<td>Offers advanced features like incremental builds and parallel testing, with support for multiple package managers and deployment targets.</td>
<td>Can be complex to set up and configure, with a steeper learning curve than some other solutions.</td>
<td>Free and open source.</td>
<td>Medium</td>
<td>Large to Very Large</td>
<td>Fully compatible with React, TypeScript, and other popular JavaScript frameworks and libraries. Can be used with npm packages as well.</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h1 id="monorepo-技术框架迭代">Monorepo 技术框架迭代</h1>
<p><a href="https://zhuanlan.zhihu.com/p/504554070" target="_blank" rel="noopener">Monorepo 的过去、现在、和未来</a></p>
<h2 id="lerna-yarn-workspace-most-used-before">Lerna + Yarn Workspace (Most used before)</h2>
<h2 id="pnpm-workspace-new-package-management">PNPM Workspace (New package management)</h2>
<h2 id="nx-vs-turborepo-vs-rush-new-monorepo-solution">Nx Vs Turborepo Vs Rush (New monorepo solution)</h2>
<h3 id="what-s-the-problem-with-the-previous-solution">What’s the problem with the previous solution?</h3>
<h3 id="monorepo-framework">Monorepo Framework</h3>
<h3 id="nx-and-turborepo">Nx and Turborepo</h3>
<h1 id="resources">Resources</h1>
<h2 id="monorepo-视频和播客"><a href="https://monorepo.tools/#monorepo-videos-podcasts" target="_blank" rel="noopener">Monorepo 视频和播客</a></h2>
<p>这里收集了一些有关 Monorepo 的视频和播客。</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=6pCBU6QSfEQ" target="_blank" rel="noopener">Using Yarn Workspaces and Lerna with TypeScript Mono-repos</a> - TypeScript 作者之一, Ryan Cavanaugh 在 React Europe 2018 上的演讲，介绍了如何使用 Yarn Workspaces 和 Lerna 来构建 TypeScript monorepo。</li>
<li><a href="https://www.youtube.com/watch?v=SSNrW8EXvR0" target="_blank" rel="noopener">Monorepos: Simplify Your Development Life!</a> - 由 Kent C. Dodds 主持的视频，介绍了使用 Yarn Workspaces 和 Lerna 创建 monorepo 的基础知识。</li>
<li><a href="https://www.youtube.com/watch?v=Ys3hZNJwHzk" target="_blank" rel="noopener">The Benefits of Monorepos for React Native and Web Projects</a> - 由 Callstack 公司的 Eric Vicenti 主持的演讲，讨论了如何使用 monorepo 来改进 React Native 和 Web 项目的开发流程。</li>
<li><a href="https://www.youtube.com/watch?v=7IkUgCLr5oA" target="_blank" rel="noopener">Scaling your Codebase with Nx and Monorepos</a> - Nrwl 公司的 Jeff Cross 主持的演讲，介绍了如何使用 Nx 来扩展 monorepo 项目，并讨论了如何处理大型代码库的挑战。</li>
<li><a href="https://www.youtube.com/watch?v=d0E2KWD4YxE" target="_blank" rel="noopener">Monorepo Patterns for Node.js and TypeScript Applications</a> - Node.js 开发人员 Wes Todd 主持的视频，讲解了如何使用 monorepo 来组织和构建 Node.js 和 TypeScript 应用程序。</li>
<li><a href="https://www.youtube.com/watch?v=1Y-PqBH-htk" target="_blank" rel="noopener">Monorepo Architecture for Frontend Projects</a> - 前端工程师 Karol Wrótniak 主持的演讲，介绍了如何使用 monorepo 构建现代 Web 应用程序，以及如何处理不同项目之间的共享代码和依赖关系。</li>
</ul>
<h2 id="monorepo-articles">Monorepo articles</h2>
<p>Here is a curated list of articles about monorepos that we think will greatly support what you just learned.</p>
<ul>
<li><a href="https://opensource.google/docs/thirdparty/oneversion?utm_source=monorepo.tools" target="_blank" rel="noopener">The One Version Rule – opensource.google</a></li>
<li><a href="https://dev.to/swyx/why-turborepo-will-be-the-first-big-trend-of-2022-4gfj?utm_source=monorepo.tools" target="_blank" rel="noopener">Why TurboRepo Will Be The First Big Trend of 2022</a></li>
<li><a href="https://dev.to/agentender/build-monorepos-not-monoliths-4gbc?utm_source=monorepo.tools" target="_blank" rel="noopener">Build Monorepos, Not Monoliths – dev.to</a></li>
</ul>
<h2 id="monorepos-books"><a href="https://monorepo.tools/#monorepo-books" target="_blank" rel="noopener">Monorepos Books</a></h2>
<ul>
<li><a href="https://f.hubspotusercontent20.net/hubfs/2757427/effective-react-with-nx-2022.pdf" target="_blank" rel="noopener">Effective React Development with Nx</a></li>
</ul>


                    <!-- Donate -->

<div>
    <div class="donate-container" style="padding: 10px 0; margin: auto auto; width: 90%; text-align: center;">
        <div></div>
        <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
        <span>Donate</span>
        </button>
        <div id="QR" style="display: none;">
            <div id="wechat" style="display: inline-block">
                <img id="wechat_qr" src="https://github.com/CatherineLiyuankun/PictureBed/raw/master/blog/base/wechat/wechatpay.png" alt="WeChat Pay" style="width: 200px; height: 200px; text-align: center;">
            <!-- <p>Wechat</p> -->
            </div>
            <div id="alipay" style="display: inline-block">
                <img id="alipay_qr" src="https://github.com/CatherineLiyuankun/PictureBed/raw/master/blog/base/alipay.png" alt="Alipay" style="width: 200px; height: 200px; text-align: center;">
            <!-- <p>Alipay</p> -->
            </div>
        </div>
    </div>
</div>


                    <! -- 添加版权信息 -->
<div class="article-footer-copyright">
  <div><b>本文标题: </b><a href="/Monorepos-Vs-MultiRepo-Polyrepo.html" target="_blank" title="Monorepos Vs MultiRepo/Polyrepo">Monorepos Vs MultiRepo/Polyrepo</a></div>
  <div><b>本文链接: </b><a href="/Monorepos-Vs-MultiRepo-Polyrepo.html" target="_blank" title="Monorepos Vs MultiRepo/Polyrepo">http://liyuankun.top/Monorepos-Vs-MultiRepo-Polyrepo.html</a>.</div>
  <div>本文由<a href="/index.html" target="_blank" title="Yuankun Li">Yuankun Li</a>创作和发表,采用<b>BY</b>-<b>NC</b>-<b>SA</b>国际许可协议进行许可,转载请注明作者及出处。</div>
</div>

                    
                    <hr>
                    <!-- Pager -->
                    <ul class="pager">
                        
                            <li class="previous">
                                <a href="/GraphQL-All-you-should-know.html" rel="external nofollow" data-toggle="tooltip" data-placement="top" title="GraphQL All you should know">&larr; Previous Post</a>
                            </li>
                        
                        
                            <li class="next">
                                <a href="/ChatGPT-All-you-should-know.html" rel="external nofollow" data-toggle="tooltip" data-placement="top" title="ChatGPT All you should know">Next Post &rarr;</a>
                            </li>
                        
                    </ul>

                    <!-- Duoshuo Comment Share -->
                    

                    <!-- Duoshuo Comment -->
                    

                    <!-- Disqus Comment -->
                    <!-- disqus comment -->

    <div class="disqus_comment">
        <div id="disqus_thread" class="disqus-thread"></div>
    </div>


                    <!-- Git Comment -->
                    <!-- gitment -->

    <hr>
    <div class="git_comment" id="git_comment">
        
            <div onclick="document.getElementById('gitment-display-button').style.display = 'none';document.getElementById('gitment-container').style.display = 'block';renderGitment();" id="gitment-display-button">show git comment</div>
            <div id="gitment-container" style="display:none"></div>
        
    </div>
    <hr>

                </div>
                
                <!-- Tabe of Content -->
                <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#what-is-a-monorepo"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">What is a Monorepo?</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#why-monorepo"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">Why Monorepo</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#multirepo-vs-monorepo"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">MultiRepo Vs MonoRepo</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#monorepo的优缺点"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">Monorepo的优缺点</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#优点"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">优点</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#缺点"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">缺点</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#monorepo的应用场景"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">Monorepo的应用场景</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#monnorepo-解决了什么问题"><span class="toc-nav-number">4.1.</span> <span class="toc-nav-text">MonnoRepo 解决了什么问题</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#monnorepo-又引入了什么问题"><span class="toc-nav-number">4.2.</span> <span class="toc-nav-text">MonnoRepo 又引入了什么问题</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#monnorepo-工具解决了哪些问题"><span class="toc-nav-number">4.3.</span> <span class="toc-nav-text">MonnoRepo 工具解决了哪些问题</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#monorepo-features"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">Monorepo features</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#monorepos-tool-comparison"><span class="toc-nav-number">6.</span> <span class="toc-nav-text">Monorepos tool comparison</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#monorepo-技术框架迭代"><span class="toc-nav-number">7.</span> <span class="toc-nav-text">Monorepo 技术框架迭代</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#lerna-yarn-workspace-most-used-before"><span class="toc-nav-number">7.1.</span> <span class="toc-nav-text">Lerna + Yarn Workspace (Most used before)</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#pnpm-workspace-new-package-management"><span class="toc-nav-number">7.2.</span> <span class="toc-nav-text">PNPM Workspace (New package management)</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#nx-vs-turborepo-vs-rush-new-monorepo-solution"><span class="toc-nav-number">7.3.</span> <span class="toc-nav-text">Nx Vs Turborepo Vs Rush (New monorepo solution)</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#what-s-the-problem-with-the-previous-solution"><span class="toc-nav-number">7.3.1.</span> <span class="toc-nav-text">What’s the problem with the previous solution?</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#monorepo-framework"><span class="toc-nav-number">7.3.2.</span> <span class="toc-nav-text">Monorepo Framework</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#nx-and-turborepo"><span class="toc-nav-number">7.3.3.</span> <span class="toc-nav-text">Nx and Turborepo</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#resources"><span class="toc-nav-number">8.</span> <span class="toc-nav-text">Resources</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#monorepo-视频和播客"><span class="toc-nav-number">8.1.</span> <span class="toc-nav-text">Monorepo 视频和播客</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#monorepo-articles"><span class="toc-nav-number">8.2.</span> <span class="toc-nav-text">Monorepo articles</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#monorepos-books"><span class="toc-nav-number">8.3.</span> <span class="toc-nav-text">Monorepos Books</span></a></li></ol></li></ol>
        
        </div>
      </aside>
    

                    
                <!-- Sidebar Container Below-->
                <div class="
    col-lg-8 col-lg-offset-2
    col-md-10 col-md-offset-1
    sidebar-container">
    
        
    
        
    
        
    
        
            
  <h5>RECENT POSTS</h5>
  <div class="widget">
    <ul>
      
        <li>
          <a href="/awesome-tools.html">程序猿的那些好用工具</a>
        </li>
      
        <li>
          <a href="/计算机英语-virus-worm-Spyware-Ransomware-Trojan-horse.html">计算机英语-virus,worm,Spyware,Ransomware,Trojan horse</a>
        </li>
      
        <li>
          <a href="/浏览器报错“localhost-sent-an-invalid-response-ERR-SSL-PROTOCOL-ERROR”.html">浏览器报错“localhost sent an invalid response.ERR_SSL_PROTOCOL_ERROR”</a>
        </li>
      
        <li>
          <a href="/JSON-Web-Token-JWT-入门教程.html">JSON Web Token (JWT) 入门教程</a>
        </li>
      
        <li>
          <a href="/Develop-LLM-powered-applications-with-LangChain-Udemy-Course.html">Develop LLM powered applications with LangChain - Udemy Course</a>
        </li>
      
    </ul>
  </div>

            <hr>
        
    
        
            <!-- Friends Blog -->

<h5>FRIENDS</h5>
<ul class="list-inline">

    
        <li><a href="https://blog.csdn.net/muzilanlan" target="_blank">CSDN</a></li>
    
        <li><a href="https://www.jianshu.com/u/6b421fa23669" target="_blank">简书</a></li>
    
</ul>

            <hr>
        
    
        
    
</div>
            </div>
        </div>
    </article>
</div>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℒ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<!-- Read more, 微信解锁博客 https://openwrite.cn/openwrite/openwrite-readmore/-->
<script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script>
<script>
    const btw = new BTWPlugin();
    btw.init({
        id: 'container',
        blogId: '19965-1582033785898-401',
        name: '岚坤爷',
        qrcode: 'https://github.com/CatherineLiyuankun/PictureBed/raw/master/blog/base/wechat/wechat-public.png',
        keyword: 'vip',
    });
    // 加英文版翻译
    const readMoreBtn = document.querySelector('#read-more-btn');
    const addEnglish = () => {
        const element = document.querySelector('#btw-modal-header');
        element.innerHTML = element.innerHTML + `<p id="btw-modal-header-en" style="margin-top: 10px; line-height: 1.8; font-size: 13px; color: #0085a1;">
            Scan the QR code to follow the WeChat public account: <strong>岚坤爷</strong><br>
            Send message:<strong> vip</strong><br>
            Get a verification code that permanently unlocks all articles on this site`;
        const input = document.querySelector('#btw-modal-input');
        input.setAttribute('placeholder', '请输入验证码 Input verification code');
        const submit = document.querySelector('#btw-submit-btn');
        submit.innerHTML = '提交 Submit';
    };

    readMoreBtn.addEventListener('click', () => {
        setTimeout(addEnglish, 10);
    });
</script>

<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-1 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                    <li>
                        <a href="/atom.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank"  href="https://github.com/catherineliyuankun">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank"  href="https://www.linkedin.com/in/liyuankun">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/muzilan">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">知</i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://www.jianshu.com/u/6b421fa23669">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">简</i>
                            </span>
                        </a>
                    </li>
                

                

                
                    <li>
                        <a target="_blank" href="mailto:muzilan1@qq.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://twitter.com/CatherineLiYK">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://www.facebook.com/liyuankun">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Yuankun Li 2025 
                    <br>
                    Theme by <a href="https://github.com/CatherineLiyuankun">Li, Yuankun</a> | 
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=catherineliyuankun&repo=hexo-theme-zilan&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("http://liyuankun.top/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-XXXXXXXX-X';
    var _gaDomain = 'yoursite';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->





    <!-- Fork me on GitHub -->
    
       
    <!-- Search -->
    <!-- {% include 'tinysou.swig' %}
 {% include 'localsearch.swig' %}
 {% include 'algolia-search/assets.swig' %} -->


  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = 'search.xml';
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = '/' + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        // dataType: isXml ? "xml" : "json",
        // dataType: "binary",
        // contentType: "text/xml",
        dataType: "text", // Fix Bug: xml parser error
        async: true,
        data: "{}",
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-cover');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if (!input || !resultContent) {
            // Fix Bug: add /zilan/layout/_partial/search/localsearch.ejs inside "site-search"
              $(".site-search")
              .append(
                  '<div class="popup search-popup local-search-popup">' +
                  '<div class="local-search-header clearfix">' +
                    '<span class="search-icon">' +
                      '<i class="fa fa-search"></i>' +
                  '</span>' +
                    '<span class="popup-btn-close">' +
                      '<i class="fa fa-times-circle"></i>' +
                    '</span>' +
                    '<div class="local-search-input-wrapper">' +
                      '<input autocomplete="off"' +
                            'placeholder="search" spellcheck="false"' +
                            'type="text" id="local-search-input">' +
                    '</div>' +
                  '</div>' +
                  '<div id="local-search-result"></div>' +
                '</div>');
            input = document.getElementById("local-search-input");
            resultContent = document.getElementById("local-search-result");
            // Fix Bug: close not work
            var searchClose = document.querySelector(".popup-btn-close");
            searchClose.addEventListener('click', onPopupClose);
          }
          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        },
        error: function (jqXHR, textStatus, errorThrown) {
            /*弹出jqXHR对象的信息*/
            alert(jqXHR.responseText);
            alert(jqXHR.status);
            alert(jqXHR.readyState);
            alert(jqXHR.statusText);
            /*弹出其他两个参数的信息*/
            alert(textStatus);
            alert(errorThrown);
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });

    var registerESCKeyEvent =  function () {
      $(document).on('keyup', function (event) {
        var shouldDismissSearchPopup = event.which === 27 &&
          $('.search-popup').is(':visible');
        if (shouldDismissSearchPopup) {
          $('.search-popup').hide();
          $('.search-popup-overlay').remove();
          $('body').css('overflow', '');
        }
      });
    };
    registerESCKeyEvent();
  </script>





    <!-- Share -->
      
    <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css">
    <script src="/lib/needsharebutton/needsharebutton.js"></script>

    
      <script>
          var pbOptions = {};
          var iconStyle = "light";
          var boxForm = "horizontal";
          var position = "bottom";
          var networks = "Wechat,Weibo,Douban,Twitter,Facebook,Reddit,Linkedin,Evernote";
          pbOptions["iconStyle"] = iconStyle;
          pbOptions["boxForm"] = boxForm;
          pbOptions["position"] = position;
          pbOptions["networks"] = networks;
          
          new needShareButton('#needsharebutton-postbottom', pbOptions);
      </script>
    

    
      <script>
          var pbOptions = {};
          var iconStyle = "light";
          var boxForm = "horizontal";
          var position = "middleRight";
          var networks = "Wechat,Weibo,Douban,Twitter,Facebook,Reddit,Linkedin,Evernote";
          pbOptions["iconStyle"] = iconStyle;
          pbOptions["boxForm"] = boxForm;
          pbOptions["position"] = position;
          pbOptions["networks"] = networks;
          
          new needShareButton('#needsharebutton-postbottom', pbOptions);
      </script>
    

    
      <script>
          var flOptions = {};
          var iconStyle = "box";
          var boxForm = "horizontal";
          var position = "middleRight";
          var networks = "Wechat,Weibo,Douban,Twitter,Facebook,Reddit,Linkedin,Evernote";
          flOptions["iconStyle"] = iconStyle;
          flOptions["boxForm"] = boxForm;
          flOptions["position"] = position;
          flOptions["networks"] = networks;

          new needShareButton('#needsharebutton-float', flOptions);
      </script>
    


    <!-- Share float -->
    
      <div id="needsharebutton-float">
        <span class="btn">
          <i class="fa fa-share-alt fa-inverse" aria-hidden="true"></i>
        </span>
      </div>
      

    <!-- Git Comment -->
    
    
    <!-- LOCAL: You can save these files to your site and update links -->
        
            <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
            <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
        
    <!-- END LOCAL -->
        
        <style>
            a.gitment-editor-footer-tip { display: none; }
            .gitment-container.gitment-footer-container { display: none; }
        </style>
        

        
        <script type="text/javascript">
            var option = {
                id: window.location.pathname,
                owner: 'CatherineLiyuankun',
                repo: 'gitment-comments',
                oauth: {
                    client_id: 'f3a0c1c7153576e1ab6c'
                }
            };
            if(true) {
                option.lang = "" || navigator.language || navigator.systemLanguage || navigator.userLanguage;
            }
            if (true && ( || false)) {
                option.oauth.redirect_protocol = '';
            }
            if (true && ( || false)) {
                option.oauth.proxy_gateway = '';
            } else {
                option.oauth.client_secret = 'bedf5010df925fa0e02e8be9399a64caac3d2b4e';
            }

            function renderGitment(){
                var gitment;
                if (true) {
                    gitment = new Gitmint(option);
                } else {
                    gitment = new Gitment(option);
                }
                gitment.render('gitment-container');
            }

            if(!true) {
                renderGitment();
            } else {
                function showGitment(){
                    document.getElementById("gitment-display-button").style.display = "none";
                    document.getElementById("gitment-container").style.display = "block";
                    renderGitment();
                }
            }
        </script>
        
    



    <!-- Disqus Comment -->
    
    <!-- disqus embedded js code start (one page only need to embed once) -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES * * */
        var disqus_shortname = "lyk-1";
        var disqus_identifier = "http://liyuankun.top/Monorepos-Vs-MultiRepo-Polyrepo.html";
        var disqus_url = "http://liyuankun.top/Monorepos-Vs-MultiRepo-Polyrepo.html";

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();

    </script>
    <!-- disqus embedded js code start end -->

    
    <!-- Duoshuo Comment -->
    

    <!-- Search popup-->
    
    
      <div class="site-search">
      <!-- {% if theme.algolia_search.enable %}
  {% include '../_third-party/search/algolia-search/dom.swig' %}
{% elseif theme.swiftype_key %}
  {% include 'search/swiftype.swig' %}
{% elseif theme.tinysou_Key %}
  {% include 'search/tinysou.swig' %}
{% elseif theme.local_search.enable %}
  {% include 'search/localsearch.swig' %}
{% endif %} -->

<div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="search" spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



      </div>
    
    
	<a id="rocket" href="#top" class="" rel="external nofollow"></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>

  <!-- Markdown math -->
   
   
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  



  <!-- Fancybox -->
  
      <link rel="stylesheet" href="/lib/fancybox/jquery.fancybox.css">
      <script src="/lib/fancybox/jquery.fancybox.pack.js"></script>
      <script src="/js/wrapImage.js"></script>
  
  <!-- Migrate from head to bottom, no longer block render and still work --><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->

</body>

</html>
